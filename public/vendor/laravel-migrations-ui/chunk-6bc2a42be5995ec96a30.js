(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"1sRX":function(t,n,e){"use strict";var r=e("wHSu"),i={components:{FontAwesomeIcon:e("rT2p").a},computed:{faSpinner:function(){return r.d}}},a=e("KHd+"),o=Object(a.a)(i,(function(){var t=this.$createElement;return(this._self._c||t)("FontAwesomeIcon",{attrs:{icon:this.faSpinner,spin:""}})}),[],!1,null,null,null);n.a=o.exports},"5iKg":function(t,n,e){"use strict";var r=e("wHSu"),i=e("rT2p"),a=e("3Zo4"),o=e("nqqA"),s=e("9HyH"),c=e("JhbM"),l=e("m3jU"),u=e("fI1A"),d=e("7pNi"),p=e("1sRX"),f={components:{BDropdown:a.a,BDropdownItem:o.a,BDropdownDivider:s.a,RunButton:d.a,FontAwesomeIcon:i.a,FreshButton:u.a,Spinner:p.a},directives:{BTooltip:c.a},data:function(){return{migrations:l.a}},computed:{faQuestionCircle:function(){return r.c}}},g=e("KHd+"),m=Object(g.a)(f,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"card shadow-sm my-4"},[e("div",{staticClass:"card-header bg-secondary text-white",staticStyle:{"line-height":"1.2","padding-left":"0.80em","padding-right":"0.80em"}},[e("a",{staticClass:"float-right text-white",attrs:{href:"https://laravel.com/docs/migrations",target:"_blank"}},[e("FontAwesomeIcon",{attrs:{icon:t.faQuestionCircle}}),t._v("\n            Laravel Docs\n        ")],1),t._v(" "),e("h6",{staticClass:"m-0"},[t._v("\n            Migrations\n            "),t.migrations.loading?e("Spinner",{staticClass:"ml-1"}):t._e()],1)]),t._v(" "),e("table",{staticClass:"table table-hover bg-white mb-0"},[e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("Date / Time")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Name")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Status")]),t._v(" "),e("th",{staticClass:"align-middle font-weight-normal text-muted text-right",attrs:{scope:"col"}},[e("FreshButton",{attrs:{size:"sm",width:"6.5em"}})],1)])]),t._v(" "),t.migrations.allMigrations.length?e("tbody",t._l(t.migrations.allMigrations,(function(n){return e("tr",{key:n.name,class:n.isMissing?"table-danger":""},[e("td",{staticClass:"align-middle"},[n.date?e("span",[t._v(t._s(n.date))]):e("span",{staticClass:"text-muted"},[t._v("(Unknown)")])]),t._v(" "),e("td",{staticClass:"align-middle"},[e("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.right",value:n.relPath,expression:"migration.relPath",modifiers:{right:!0}}],staticClass:"pr-1"},[n.isMissing?[t._v("\n                            "+t._s(n.title)+"\n                            "),e("span",{staticClass:"badge badge-danger"},[t._v("File Missing!")])]:e("router-link",{attrs:{to:"/migration-details/"+n.name,"data-toggle":"modal","data-target":"#migration-popup","data-path":n.relPath}},[t._v("\n                            "+t._s(n.title)+"\n                        ")])],2)]),t._v(" "),e("td",{staticClass:"align-middle"},[n.isApplied?e("span",{staticClass:"badge badge-pill badge-success"},[t._v("Applied â€“ Batch "+t._s(n.batch))]):e("span",{staticClass:"badge badge-pill badge-warning"},[t._v("Pending")])]),t._v(" "),e("td",{staticClass:"align-middle text-right"},[e("RunButton",{attrs:{migration:n,size:"sm",width:"6.5em"}})],1)])})),0):t.migrations.loading?e("tbody",[e("tr",[e("td",{staticClass:"text-muted",attrs:{colspan:"4"}},[e("Spinner",{staticClass:"mr-2"}),t._v("\n                    Loading...\n                ")],1)])]):e("tbody",[t._m(0)])])])}),[function(){var t=this.$createElement,n=this._self._c||t;return n("tr",[n("td",{attrs:{colspan:"4"}},[n("em",{staticClass:"text-muted"},[this._v("No migrations found.")])])])}],!1,null,null,null);n.a=m.exports},"7LFa":function(t,n,e){"use strict";n.a={mounted:function(){window.addEventListener("keydown",this.$_refresh_keyDown)},destroyed:function(){window.removeEventListener("keydown",this.$_refresh_keyDown)},methods:{$_refresh_keyDown:function(t){("F5"===t.code&&!t.ctrlKey||t.ctrlKey&&"KeyR"===t.code)&&(t.preventDefault(),this.refresh())}}}},"7pNi":function(t,n,e){"use strict";var r=e("3Zo4"),i=e("nqqA"),a=e("9HyH"),o=e("m3jU"),s={components:{Spinner:e("1sRX").a,BDropdown:r.a,BDropdownItem:i.a,BDropdownDivider:a.a},props:{migration:{type:Object,required:!0},size:{type:String,default:""},width:{type:String,default:void 0}},data:function(){return{migrations:o.a}},computed:{variant:function(){return this.migration.isMissing?"secondary":this.migration.isApplied?"danger":"success"}},methods:{migrateAll:function(){return this.migrations.migrateAll()},migrateSingle:function(){return this.migrations.migrateSingle(this.migration)},rollbackAll:function(){return this.migrations.rollbackAll()},rollbackBatch:function(){return this.migrations.rollbackBatch(this.migration.batch)},rollbackSingle:function(){return this.migrations.rollbackSingle(this.migration)},runDefault:function(){this.migration.isMissing||(this.migration.isApplied?this.rollbackSingle():this.migrateSingle())}}},c=e("KHd+"),l=Object(c.a)(s,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.migration.isMissing?t._e():e("BDropdown",{style:{width:t.width},attrs:{right:"",size:t.size,split:"",variant:t.variant,disabled:t.migrations.running},on:{click:t.runDefault},scopedSlots:t._u([{key:"button-content",fn:function(){return[t.migration.running?e("Spinner"):t.migration.isMissing?[t._v("Fix")]:t.migration.isApplied?[t._v("Rollback")]:[t._v("Migrate")]]},proxy:!0}],null,!1,3813964681)},[t._v(" "),t.migration.isMissing?[e("BDropdownItem",[t._v("Recreate File")]),t._v(" "),e("BDropdownItem",[t._v("Update Filename")]),t._v(" "),e("BDropdownItem",[t._v("Delete Record")])]:t.migration.isApplied?[e("BDropdownItem",{on:{click:t.rollbackSingle}},[t._v("This Migration")]),t._v(" "),e("BDropdownItem",{on:{click:t.rollbackBatch}},[t._v("Batch "+t._s(t.migration.batch))]),t._v(" "),e("BDropdownItem",{on:{click:t.rollbackAll}},[t._v("All Migrations")])]:[e("BDropdownItem",{on:{click:t.migrateSingle}},[t._v("This Migration")]),t._v(" "),e("BDropdownItem",{on:{click:t.migrateAll}},[t._v("All Pending")])]],2)}),[],!1,null,null,null);n.a=l.exports},aQxf:function(t,n,e){"use strict";var r=e("wHSu"),i=e("rT2p"),a=e("JhbM"),o=e("m3jU"),s={components:{Spinner:e("1sRX").a,FontAwesomeIcon:i.a},directives:{BTooltip:a.a},data:function(){return{migrations:o.a}},computed:{faPlug:function(){return r.b},faDatabase:function(){return r.a}}},c=e("KHd+"),l=Object(c.a)(s,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"card shadow-sm my-4"},[e("div",{staticClass:"card-header bg-secondary text-white",staticStyle:{"line-height":"1.2","padding-left":"0.80em","padding-right":"0.80em"}},[t.migrations.loading&&!t.migrations.database?e("span",{staticClass:"text-muted"},[e("Spinner",{staticClass:"mr-2"}),t._v("\n            Loading...\n        ")],1):[e("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:"Connection",expression:"'Connection'"}],staticStyle:{cursor:"default"}},[e("FontAwesomeIcon",{staticClass:"mr-1",attrs:{icon:t.faPlug}}),t._v("\n                "+t._s(t.migrations.connection)+"\n            ")],1),t._v(" "),e("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:"Database",expression:"'Database'"}],staticClass:"ml-3",staticStyle:{cursor:"default"}},[e("FontAwesomeIcon",{staticClass:"mr-1",attrs:{icon:t.faDatabase}}),t._v("\n                "+t._s(t.migrations.database)+"\n            ")],1)]],2),t._v(" "),e("table",{staticClass:"table table-hover bg-white mb-0"},[e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("\n                    Tables\n                    "),t.migrations.loading?e("Spinner",{staticClass:"ml-1"}):t._e()],1),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("\n                    Rows\n                ")])])]),t._v(" "),t.migrations.tables.length?e("tbody",t._l(t.migrations.tables,(function(n){return e("tr",[e("td",{staticClass:"align-middle"},[t._v("\n                    "+t._s(n.name)+"\n                ")]),t._v(" "),e("td",{staticClass:"align-middle"},[t._v("\n                    "+t._s(n.rows)+"\n                ")])])})),0):t.migrations.loading?e("tbody",[e("tr",[e("td",{staticClass:"text-muted",attrs:{colspan:"4"}},[e("Spinner"),t._v("\n                    Loading...\n                ")],1)])]):e("tbody",[t._m(0)])])])}),[function(){var t=this.$createElement,n=this._self._c||t;return n("tr",[n("td",{attrs:{colspan:"1"}},[n("em",{staticClass:"text-muted"},[this._v("No tables found.")])])])}],!1,null,null,null);n.a=l.exports},fI1A:function(t,n,e){"use strict";var r=e("3Zo4"),i=e("nqqA"),a=e("9HyH"),o=e("m3jU"),s={components:{Spinner:e("1sRX").a,BDropdown:r.a,BDropdownItem:i.a,BDropdownDivider:a.a},props:{size:{type:String,default:""},width:{type:String,default:void 0}},data:function(){return{migrations:o.a}}},c=e("KHd+"),l=Object(c.a)(s,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("BDropdown",{style:{width:t.width},attrs:{right:"",size:t.size,split:"",variant:"warning",disabled:t.migrations.running},on:{click:function(n){return t.migrations.fresh(!0)}},scopedSlots:t._u([{key:"button-content",fn:function(){return[t.migrations.runningFresh?e("Spinner"):[t._v("Fresh")]]},proxy:!0}])},[t._v(" "),e("BDropdownItem",{on:{click:function(n){return t.migrations.fresh(!1)}}},[t._v("\n        Fresh\n        "),e("small",{staticClass:"d-block text-muted"},[t._v("Drop tables & run all migrations")])]),t._v(" "),e("BDropdownItem",{on:{click:function(n){return t.migrations.fresh(!0)}}},[t._v("\n        Fresh + Seed "),e("small",{staticClass:"text-muted"},[t._v("(Default)")])]),t._v(" "),e("BDropdownDivider"),t._v(" "),e("BDropdownItem",{on:{click:function(n){return t.migrations.refresh(!1)}}},[t._v("\n        Refresh\n        "),e("small",{staticClass:"d-block text-muted"},[t._v("Rollback & re-run all migrations")])]),t._v(" "),e("BDropdownItem",{on:{click:function(n){return t.migrations.refresh(!0)}}},[t._v("\n        Refresh + Seed\n    ")]),t._v(" "),e("BDropdownDivider"),t._v(" "),e("BDropdownItem",{on:{click:function(n){return t.migrations.seed()}}},[t._v("\n        Seed only\n    ")])],1)}),[],!1,null,null,null);n.a=l.exports},m3jU:function(t,n,e){"use strict";var r=e("o0o1"),i=e.n(r),a=e("XuX8"),o=e.n(a),s=e("vDqi"),c=e.n(s),l=e("OPCw");function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var d=c.a.create({baseURL:document.body.dataset.baseUrl+"/api",headers:{Accept:"text/html"}});function p(t){/*phpdebugbar&&phpdebugbar.ajaxHandler&&t.request&&phpdebugbar.ajaxHandler.handle(t.request)*/}d.interceptors.request.use((function(t){return"get"!==t.method.toLowerCase()&&"object"===u(t.data)&&(t.data._token=document.body.dataset.csrfToken),t})),d.interceptors.response.use((function(t){return p(t),t}),(function(t){return t.response&&(l.a.show("Error in ".concat(t.request.responseURL),t.response.data),p(t.response)),Promise.reject(t)}));var f=d;function g(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var e=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(e.push(o.value),!n||e.length!==n);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t,n){return(_=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function y(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var k=function(t){function n(t){var e,r,i;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),r=this,e=!(i=b(n).call(this))||"object"!==v(i)&&"function"!=typeof i?w(r):i,y(w(e),"date",null),y(w(e),"title",null),y(w(e),"batch",null),y(w(e),"relPath",null),y(w(e),"source",null),y(w(e),"loading",!1),y(w(e),"running",!1),e.name=t,e}var e,r,i;return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_(t,n)}(n,t),e=n,(r=[{key:"isApplied",get:function(){return null!==this.batch}},{key:"isMissing",get:function(){return null===this.relPath}}])&&h(e.prototype,r),i&&h(e,i),n}(function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,e,r;return n=t,(e=[{key:"fill",value:function(t){for(var n=0,e=Object.entries(t);n<e.length;n++){var r=g(e[n],2),i=r[0],a=r[1];this.hasOwnProperty(i)?this[i]=a:console.warn(this.constructor.name,"fill(): ignoring unknown key",i,"in",t,"when updating",this)}}}])&&m(n.prototype,e),r&&m(n,r),t}()),S=e("ZgVb");function x(t,n,e,r,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,i)}function D(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var a=t.apply(n,e);function o(t){x(a,r,i,o,s,"next",t)}function s(t){x(a,r,i,o,s,"throw",t)}o(void 0)}))}}n.a=new o.a({data:function(){return{connection:null,database:null,loading:!1,migrationDetails:{},migrationNames:[],queue:[],queueRunning:!1,running:!1,runningFresh:!1,tables:[]}},computed:{allMigrations:function(){var t=this;return this.migrationNames.map((function(n){return t.migrationDetails[n]}))}},methods:{load:function(){var t=this;return D(i.a.mark((function n(){var e;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.loading=!0,n.prev=1,n.next=4,f.get("list");case 4:e=n.sent,t.setOverview(e.data);case 6:return n.prev=6,t.loading=!1,n.finish(6);case 9:case"end":return n.stop()}}),n,null,[[1,,6,9]])})))()},getMigration:function(t){return t in this.migrationDetails||o.a.set(this.migrationDetails,t,new k(t)),this.migrationDetails[t]},fresh:function(t){var n=this;return D(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.running=!0,n.runningFresh=!0,e.prev=2,e.next=5,f.post("fresh",{seed:t});case 5:r=e.sent,n.setOverview(r.data);case 7:return e.prev=7,n.running=!1,n.runningFresh=!1,e.finish(7);case 11:case"end":return e.stop()}}),e,null,[[2,,7,11]])})))()},loadDetails:function(t){var n=this;return D(i.a.mark((function e(){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=n.getMigration(t)).loading=!0,e.prev=2,e.next=5,f.get("migration-details/".concat(t));case 5:a=e.sent,r.fill(a.data);case 7:return e.prev=7,r.loading=!1,e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[2,,7,10]])})))()},refresh:function(t){var n=this;return D(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.running=!0,n.runningFresh=!0,e.prev=2,e.next=5,f.post("refresh",{seed:t});case 5:r=e.sent,n.setOverview(r.data);case 7:return e.prev=7,n.running=!1,n.runningFresh=!1,e.finish(7);case 11:case"end":return e.stop()}}),e,null,[[2,,7,11]])})))()},seed:function(){var t=this;return D(i.a.mark((function n(){var e;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.running=!0,t.runningFresh=!0,n.prev=2,n.next=5,f.post("seed");case 5:e=n.sent,t.setOverview(e.data);case 7:return n.prev=7,t.running=!1,t.runningFresh=!1,n.finish(7);case 11:case"end":return n.stop()}}),n,null,[[2,,7,11]])})))()},migrateAll:function(){var t=this;return D(i.a.mark((function n(){var e,r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.allMigrations.filter((function(t){return!t.isApplied})),t.running=!0,e.forEach((function(t){return t.running=!0})),n.prev=3,n.next=6,f.post("migrate-all");case 6:r=n.sent,t.setOverview(r.data);case 8:return n.prev=8,t.running=!1,e.forEach((function(t){return t.running=!1})),n.finish(8);case 12:case"end":return n.stop()}}),n,null,[[3,,8,12]])})))()},migrateSingle:function(t){var n=this;return D(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.running=!0,t.running=!0,e.prev=2,e.next=5,f.post("migrate-single/".concat(t.name));case 5:r=e.sent,n.setOverview(r.data);case 7:return e.prev=7,n.running=!1,t.running=!1,e.finish(7);case 11:case"end":return e.stop()}}),e,null,[[2,,7,11]])})))()},rollbackAll:function(){var t=this;return D(i.a.mark((function n(){var e,r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.allMigrations.filter((function(t){return t.isApplied})),t.running=!0,e.forEach((function(t){return t.running=!0})),n.prev=3,n.next=6,f.post("rollback-all");case 6:r=n.sent,t.setOverview(r.data);case 8:return n.prev=8,t.running=!1,e.forEach((function(t){return t.running=!1})),n.finish(8);case 12:case"end":return n.stop()}}),n,null,[[3,,8,12]])})))()},rollbackBatch:function(t){var n=this;return D(i.a.mark((function e(){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.allMigrations.filter((function(n){return n.batch===t})),n.running=!0,r.forEach((function(t){return t.running=!0})),e.prev=3,e.next=6,f.post("rollback-batch/".concat(t));case 6:a=e.sent,n.setOverview(a.data);case 8:return e.prev=8,n.running=!1,r.forEach((function(t){return t.running=!1})),e.finish(8);case 12:case"end":return e.stop()}}),e,null,[[3,,8,12]])})))()},rollbackSingle:function(t){var n=this;return D(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.running=!0,t.running=!0,e.prev=2,e.next=5,f.post("rollback-single/".concat(t.name));case 5:r=e.sent,n.setOverview(r.data);case 7:return e.prev=7,n.running=!1,t.running=!1,e.finish(7);case 11:case"end":return e.stop()}}),e,null,[[2,,7,11]])})))()},setOverview:function(t){this.connection=t.connection,this.database=t.database,this.tables=t.tables;var n=[],e=!0,r=!1,i=void 0;try{for(var a,o=t.migrations[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var s=a.value;n.push(s.name),this.getMigration(s.name).fill(s)}}catch(t){r=!0,i=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw i}}this.migrationNames=n,t.toasts&&S.a.show(t.toasts),t.error&&l.a.show(t.error.title,t.error.html)}}})}}]);
//# sourceMappingURL=chunk-6bc2a42be5995ec96a30.js.map
